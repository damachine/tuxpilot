import"../chunks/Bzak7iHL.js";import{$ as Ae,a0 as Fe,a4 as g,y as V,a1 as Ge,W as Oe,a3 as h,a5 as s,a9 as t,a6 as X,a7 as x,a8 as je,z as r,x as n,ac as i,aa as Y}from"../chunks/D4LVdm81.js";import{i as Ce}from"../chunks/CHjxrPJZ.js";import{e as Te,i as Re,a as Se}from"../chunks/DdXZqSAS.js";import{b as C,r as y}from"../chunks/B-wBlBPq.js";import{b as T,a as Pe}from"../chunks/Cierql9v.js";async function Be(S,_,v,u,l,m){r(_,!0),r(v,"Saving configuration..."),r(u,"info");try{const c=await fetch("/api/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({section:"ai",updates:{provider:l.ai.provider,model:l.ai.model,temperature:l.ai.temperature,max_tokens:l.ai.max_tokens},validate_only:!1})});if(!c.ok)throw new Error(`Failed to save AI configuration: ${c.status}`);const a=await fetch("/api/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({section:"execution",updates:{mode:l.execution.mode,require_confirmation:l.execution.require_confirmation,timeout:l.execution.timeout},validate_only:!1})});if(!a.ok)throw new Error(`Failed to save execution configuration: ${a.status}`);const f=await fetch("/api/config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({section:"web",updates:{port:l.web.port,bind_address:l.web.bind_address,ssl_enabled:l.web.ssl_enabled},validate_only:!1})});if(!f.ok)throw new Error(`Failed to save web configuration: ${f.status}`);const b=await f.json();r(v,"Configuration saved successfully"),r(u,"success"),b.restart_required?m("warning","Configuration saved. Server restart required for web settings to take effect."):m("success","Configuration saved successfully")}catch(c){console.error("Error saving configuration:",c),r(v,"Failed to save configuration"),r(u,"error"),m("error",`Failed to save configuration: ${c instanceof Error?c.message:String(c)}`)}finally{r(_,!1)}}var He=h('<div class="loading-spinner svelte-11mkey4"></div>'),Ie=(S,_,v)=>_(n(v).id),Je=h('<div><span class="svelte-11mkey4"> </span> <button class="svelte-11mkey4">√ó</button></div>'),Ne=h('<div class="alerts svelte-11mkey4"></div>'),Ue=h('<option class="svelte-11mkey4"> </option>'),De=h('<div class="settings-page h-full overflow-auto svelte-11mkey4"><div class="settings-header svelte-11mkey4"><h1 class="svelte-11mkey4">‚öôÔ∏è Settings</h1> <p class="svelte-11mkey4">Manage your TuxPilot system configuration</p></div> <div class="settings-toolbar svelte-11mkey4"><div><!> <span class="svelte-11mkey4"> </span></div> <div class="toolbar-actions svelte-11mkey4"><button class="btn btn-secondary svelte-11mkey4">üîÑ Reload</button> <button class="btn btn-success svelte-11mkey4">üíæ Save Changes</button></div></div> <!> <div class="settings-content svelte-11mkey4"><div class="config-section svelte-11mkey4"><h3 class="svelte-11mkey4">ü§ñ AI Configuration</h3> <div class="form-grid svelte-11mkey4"><div class="form-group svelte-11mkey4"><label for="ai-provider" class="svelte-11mkey4">Provider</label> <select id="ai-provider" class="svelte-11mkey4"><option class="svelte-11mkey4">Ollama</option><option class="svelte-11mkey4">OpenAI</option><option class="svelte-11mkey4">Anthropic</option></select></div> <div class="form-group svelte-11mkey4"><label for="ai-model" class="svelte-11mkey4">Model</label> <select id="ai-model" class="svelte-11mkey4"></select></div> <div class="form-group svelte-11mkey4"><label for="ai-temperature" class="svelte-11mkey4">Temperature</label> <input id="ai-temperature" type="number" min="0" max="2" step="0.1" class="svelte-11mkey4"/></div> <div class="form-group svelte-11mkey4"><label for="ai-max-tokens" class="svelte-11mkey4">Max Tokens</label> <input id="ai-max-tokens" type="number" min="1" max="8192" class="svelte-11mkey4"/></div></div></div> <div class="config-section svelte-11mkey4"><h3 class="svelte-11mkey4">‚öôÔ∏è Execution Settings</h3> <div class="form-grid svelte-11mkey4"><div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">Mode</label> <select class="svelte-11mkey4"><option class="svelte-11mkey4">Supervised</option><option class="svelte-11mkey4">Semi-Automatic</option><option class="svelte-11mkey4">Autonomous</option><option class="svelte-11mkey4">Read-Only</option></select></div> <div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">Require Confirmation</label> <input type="checkbox" class="svelte-11mkey4"/></div> <div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">Timeout (seconds)</label> <input type="number" min="1" max="300" class="svelte-11mkey4"/></div></div></div> <div class="config-section svelte-11mkey4"><h3 class="svelte-11mkey4">üåê Web Server Configuration</h3> <div class="form-grid svelte-11mkey4"><div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">Port</label> <input type="number" min="1" max="65535" class="svelte-11mkey4"/></div> <div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">Bind Address</label> <select class="svelte-11mkey4"><option class="svelte-11mkey4">127.0.0.1 (localhost)</option><option class="svelte-11mkey4">0.0.0.0 (all interfaces)</option></select></div> <div class="form-group svelte-11mkey4"><label class="svelte-11mkey4">SSL Enabled</label> <input type="checkbox" class="svelte-11mkey4"/></div></div></div></div></div>');function Ye(S,_){Fe(_,!0);let v=g(!1),u=g("Loading configuration..."),l=g("info"),m=g(V([])),c=g(V([])),a=V({ai:{provider:"ollama",model:"llama3.2",temperature:.7,max_tokens:2048,api_key_configured:!1},execution:{mode:"supervised",require_confirmation:!0,timeout:30},web:{port:8082,bind_address:"127.0.0.1",ssl_enabled:!1}});Ge(()=>{f(),ee()});async function f(){r(v,!0),r(u,"Loading configuration..."),r(l,"info");try{const e=await fetch("/api/config",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const o=await e.json();a.ai.provider=o.ai.provider,a.ai.model=o.ai.model,a.ai.temperature=o.ai.temperature,a.ai.max_tokens=o.ai.max_tokens,a.ai.api_key_configured=o.ai.api_key_configured||!1,a.execution.mode=o.execution.mode,a.execution.require_confirmation=o.execution.require_confirmation,a.execution.timeout=o.execution.timeout,a.web.port=o.web.port,a.web.bind_address=o.web.bind_address,a.web.ssl_enabled=o.web.ssl_enabled,r(u,"Configuration loaded successfully"),r(l,"success"),b("success","Configuration loaded successfully")}catch(e){console.error("Error loading configuration:",e),r(u,"Failed to load configuration"),r(l,"error"),b("error",`Failed to load configuration: ${e instanceof Error?e.message:String(e)}`)}finally{r(v,!1)}}function b(e,o){const d={id:Date.now().toString(),type:e,message:o};r(m,[...n(m),d],!0),setTimeout(()=>{Z(d.id)},5e3)}function Z(e){r(m,n(m).filter(o=>o.id!==e),!0)}async function ee(){try{const e=ae(a.ai.provider);r(c,e,!0)}catch(e){console.error("Error loading available models:",e),r(c,ae(a.ai.provider),!0)}}function ae(e){switch(e){case"ollama":return[{id:"llama3.2",name:"Llama 3.2 (Latest)"},{id:"llama3.1:8b",name:"Llama 3.1 8B"},{id:"llama3.1:70b",name:"Llama 3.1 70B"},{id:"codellama",name:"Code Llama"},{id:"mistral",name:"Mistral 7B"},{id:"mixtral:8x7b",name:"Mixtral 8x7B"},{id:"qwen2.5",name:"Qwen 2.5"},{id:"gemma2",name:"Gemma 2"}];case"openai":return[{id:"gpt-4o",name:"GPT-4o (Latest)"},{id:"gpt-4o-mini",name:"GPT-4o Mini"},{id:"gpt-4-turbo",name:"GPT-4 Turbo"},{id:"gpt-4",name:"GPT-4"},{id:"gpt-3.5-turbo",name:"GPT-3.5 Turbo"}];case"anthropic":return[{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet (Latest)"},{id:"claude-3-5-haiku-20241022",name:"Claude 3.5 Haiku"},{id:"claude-3-opus-20240229",name:"Claude 3 Opus"},{id:"claude-3-sonnet-20240229",name:"Claude 3 Sonnet"},{id:"claude-3-haiku-20240307",name:"Claude 3 Haiku"}];default:return[{id:a.ai.model,name:a.ai.model}]}}Oe(()=>{ee()});var P=De(),E=t(s(P),2),w=s(E),te=s(w);{var Ee=e=>{var o=He();x(e,o)};Ce(te,e=>{n(v)&&e(Ee)})}var ie=t(te,2),qe=s(ie,!0);i(ie),i(w);var se=t(w,2),q=s(se);q.__click=f;var oe=t(q,2);oe.__click=[Be,v,u,l,a,b],i(se),i(E);var re=t(E,2);{var Le=e=>{var o=Ne();Te(o,21,()=>n(m),d=>d.id,(d,k)=>{var p=Je(),K=s(p),Me=s(K,!0);i(K);var $e=t(K,2);$e.__click=[Ie,Z,k],i(p),X(()=>{Se(p,1,`alert alert-${n(k).type??""}`,"svelte-11mkey4"),Y(Me,n(k).message)}),x(d,p)}),i(o),x(e,o)};Ce(re,e=>{n(m).length>0&&e(Le)})}var le=t(re,2),L=s(le),ne=t(s(L),2),M=s(ne),$=t(s(M),2),A=s($);A.value=A.__value="ollama";var F=t(A);F.value=F.__value="openai";var ve=t(F);ve.value=ve.__value="anthropic",i($),i(M);var G=t(M,2),O=t(s(G),2);Te(O,21,()=>n(c),Re,(e,o)=>{var d=Ue(),k=s(d,!0);i(d);var p={};X(()=>{Y(k,n(o).name),p!==(p=n(o).id)&&(d.value=(d.__value=n(o).id)??"")}),x(e,d)}),i(O),i(G);var j=t(G,2),de=t(s(j),2);y(de),i(j);var ce=t(j,2),me=t(s(ce),2);y(me),i(ce),i(ne),i(L);var R=t(L,2),ue=t(s(R),2),B=s(ue),H=t(s(B),2),I=s(H);I.value=I.__value="supervised";var J=t(I);J.value=J.__value="semi-auto";var N=t(J);N.value=N.__value="autonomous";var pe=t(N);pe.value=pe.__value="read-only",i(H),i(B);var U=t(B,2),_e=t(s(U),2);y(_e),i(U);var fe=t(U,2),ye=t(s(fe),2);y(ye),i(fe),i(ue),i(R);var be=t(R,2),ke=t(s(be),2),D=s(ke),ge=t(s(D),2);y(ge),i(D);var W=t(D,2),z=t(s(W),2),Q=s(z);Q.value=Q.__value="127.0.0.1";var xe=t(Q);xe.value=xe.__value="0.0.0.0",i(z),i(W);var he=t(W,2),we=t(s(he),2);y(we),i(he),i(ke),i(be),i(le),i(P),X(()=>{Se(w,1,`status-indicator status-${n(l)??""}`,"svelte-11mkey4"),Y(qe,n(u)),q.disabled=n(v),oe.disabled=n(v)}),C($,()=>a.ai.provider,e=>a.ai.provider=e),C(O,()=>a.ai.model,e=>a.ai.model=e),T(de,()=>a.ai.temperature,e=>a.ai.temperature=e),T(me,()=>a.ai.max_tokens,e=>a.ai.max_tokens=e),C(H,()=>a.execution.mode,e=>a.execution.mode=e),Pe(_e,()=>a.execution.require_confirmation,e=>a.execution.require_confirmation=e),T(ye,()=>a.execution.timeout,e=>a.execution.timeout=e),T(ge,()=>a.web.port,e=>a.web.port=e),C(z,()=>a.web.bind_address,e=>a.web.bind_address=e),Pe(we,()=>a.web.ssl_enabled,e=>a.web.ssl_enabled=e),x(S,P),je()}Ae(["click"]);export{Ye as component};
